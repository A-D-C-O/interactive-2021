<!DOCTYPE html>
<html>
<head>
<style>

#shapes {
	overflow: auto;
	max-width: 3000px;
	margin: auto;
	margin-top: 200px;
	zoom: 0.4;
    -moz-transform: scale(0.4);
}

.blackSquare {
	animation: fade 3s linear;
}

@keyframes fade {
	0%,100% { opacity: 1; }
	40%,60% {opacity: 0; }
}

</style>
</head>

<body>

	<div id="shapes">
		<img src="room_180/png/A.png" height=3000px usemap="#A_map" id="room_image" /> 
	</div>

<map name="A_map">
	<area shape="rect" coords="0, 0, 2200, 3956" id="A_to_mantle" onclick="transition(this.id);" >
	<area shape="rect" coords="2200,0, 3600, 3956" id="A_to_chair" onclick="transition(this.id);">
	<area shape="rect" coords="3600, 0, 5500, 3956" id="A_to_books" onclick="transition(this.id);">
	<area shape="rect" coords="5500, 0, 7500, 3956" id="A_to_bed" onclick="transition(this.id);">
	<area shape="rect" coords="7500, 0, 11538, 3956" id="A_to_lights" onclick="transition(this.id);">
</map>

<!-- <map name="A1_map">
	<area shape="rect" coords="0,0,2200,3000" onclick="mess();" >
</map> -->

<map name="mantle_map">
	<area shape="rect" coords="0, 0, 3500 ,3000" id="mantle_left" onclick="transition(this.id);" >
	<area shape="rect" coords="3500, 0, 5457, 3000" id="mantle_right" onclick="transition(this.id);" >
</map>

<map name="chair_map">
	<area shape="rect" coords="0, 0, 400 ,3000" id="chair_left" onclick="transition(this.id);" >
	<area shape="rect" coords="2626, 0, 5252, 3000" id="chair_right" onclick="transition(this.id);" >
</map>

<map name="books_map">
	<area shape="rect" coords="0, 0, 200 ,3000" id="books_left" onclick="transition(this.id);" >
	<area shape="rect" coords="2626, 0, 4178.44, 3000" id="books_right" onclick="transition(this.id);" >
</map>

<map name="bed_map">
	<area shape="rect" coords="0, 0, 200 ,3000" id="bed_left" onclick="transition(this.id);" >
	<area shape="rect" coords="3000, 0, 4178.44, 3000" id="bed_right" onclick="transition(this.id);" >
</map>

<map name="lights_map">
	<area shape="rect" coords="0, 0, 500 ,3000" id="lights_left" onclick="transition(this.id);" >
	<area shape="rect" coords="4000, 0, 5441.63, 3000" id="lights_right" onclick="transition(this.id);" >
</map>

<map name="closet_map">
	<area shape="rect" coords="0, 0, 500 ,3000" id="closet_left" onclick="transition(this.id);" >
	<area shape="rect" coords="2200, 0, 5441.63, 3000" id="closet_right" onclick="transition(this.id);" >
</map>

<map name="tv_map">
	<area shape="rect" coords="0, 0, 800 ,3000" id="tv_left" onclick="transition(this.id);" >
	<area shape="rect" coords="800, 0, 5441.63, 3000" id="tv_right" onclick="transition(this.id);" >
</map>

<map name="speakers_map">
	<area shape="rect" coords="0, 0, 800 ,3000" id="speakers_left" onclick="transition(this.id);" >
	<area shape="rect" coords="800, 0, 5441.63, 3000" id="speakers_right" onclick="transition(this.id);" >
</map>

<!-- 
RESEARCH LINKS

https://www.sfgate.com/local/article/Google-Street-View-blurred-houses-14096605.php

https://www.sfgate.com/local/article/Google-Street-View-blurred-houses-14096605.php

https://reallifemag.com/springtime-everywhere/
-->

<script>

function mess() {
// get div with the ID "shapes"
let canvas = document.getElementById('shapes');
let currentStyle = window.getComputedStyle(canvas);
let currentMargin = currentStyle.marginLeft;
let currentMarginNumber = parseInt(currentMargin, 10);
console.log(currentMarginNumber);
let imgPath = 'clutter/final/';
let imgCollection = ['DC.png','frog.png','quarters.png','string.png','polar.png','keys.png','stick.png','keychain.png','tack.png','sani.png','advil.png','12.png','button.png'];
// randomly choose an image from the files stored in /clutter/final
let imgChoice = Math.floor(Math.random() * imgCollection.length);
let imgChosen = imgCollection[imgChoice];
// give the randomly chosen image a random rotation and location in the div, "shapes"
let imgRotation = Math.floor(Math.random() * 360);
let imgTop = Math.floor(Math.random() * 2999);
let imgLeft = Math.floor(Math.random() * 2999 ) + currentMarginNumber;
// inject a new image element into the div with the above random;y chosen attributes
canvas.innerHTML += `<img src="${imgPath}${imgChosen}" width=450px; style="margin:0auto; transform:rotate(${imgRotation}deg); position: absolute; top: ${imgTop}px; left: ${imgLeft}px;"/>`
// console.log(canvas.innerHTML);
}





function img_switch (current_id) {
	
	let current = document.getElementById("room_image");

	if (current_id == "A_to_mantle") {
		current.src = "room_180/png/mantle.png";
		current.setAttribute("usemap","#mantle_map");
		console.log("test2");
	} else if (current_id == "A_to_chair") {
		current.src = "room_180/png/chair.png";
		current.setAttribute("usemap","#chair_map");
	} else if (current_id == "A_to_books") {
		current.src = "room_180/png/books.png";
		current.setAttribute("usemap","#books_map");
	} else if (current_id == "A_to_bed") {
		current.src = "room_180/png/bed.png";
		current.setAttribute("usemap","#bed_map");
	} else if (current_id == "A_to_lights") {
		current.src = "room_180/png/lights.png";
		current.setAttribute("usemap","#lights_map");
	}  else if (current_id == "mantle_left") {
		// DECIDE IMAGE current.src = "room_180/png/lights.png";
		//current.setAttribute("usemap","");
	}  else if (current_id == "mantle_right") {
		current.src = "room_180/png/chair.png";
		current.setAttribute("usemap","#chair_map");
	}  else if (current_id == "chair_left") {
		current.src = "room_180/png/mantle.png";
		current.setAttribute("usemap","#mantle_map");
	}  else if (current_id == "chair_right") {
		current.src = "room_180/png/books.png";
		current.setAttribute("usemap","#books_map");
	}  else if (current_id == "books_left") {
		current.src = "room_180/png/chair.png";
		current.setAttribute("usemap","#chair_map");
	}  else if (current_id == "books_right") {
		current.src = "room_180/png/bed.png";
		current.setAttribute("usemap","#bed_map");
	}  else if (current_id == "bed_left") {
		current.src = "room_180/png/books.png";
		current.setAttribute("usemap","#books_map");
	}  else if (current_id == "bed_right") {
		current.src = "room_180/png/lights.png";
		current.setAttribute("usemap","#lights_map");
	}  else if (current_id == "lights_left") {
		current.src = "room_180/png/bed.png";
		current.setAttribute("usemap","#bed_map");
	}  else if (current_id == "lights_right") {
		current.src = "room_180/png/closet.png";
		current.setAttribute("usemap","#closet_map");
	}  else if (current_id == "closet_left") {
		current.src = "room_180/png/lights.png";
		current.setAttribute("usemap","#lights_map");
	}  else if (current_id == "closet_right") {
		current.src = "room_180/png/tv.png";
		current.setAttribute("usemap","#tv_map");
	}  else if (current_id == "tv_left") {
		current.src = "room_180/png/closet.png";
		current.setAttribute("usemap","#closet_map");
	}  else if (current_id == "tv_right") {
		current.src = "room_180/png/speakers.png";
		current.setAttribute("usemap","#speakers_map");
	}  else if (current_id == "speakers_left") {
		current.src = "room_180/png/tv.png";
		current.setAttribute("usemap","#tv_map");
	}  else if (current_id == "speakers_right") {
		current.src = "room_180/png/A.png";
		current.setAttribute("usemap","#A_map");
	}

    mess();
    console.log(current_id + " img_switch complete");

}

function toBlack(current_id) {
	console.log(current_id + "toBlack");
	let element = document.getElementById("shapes");
	element.classList.add("blackSquare");
	function triggerSwitch(current_id) { setTimeout(function a() {img_switch(current_id);}, 1500);
		console.log(current_id + " = current_id triggerSwitch complete");
	}
	triggerSwitch(current_id);
	//Wait until the animation runs to trigger DOM reflow 
	//and remove "blackSquare" class
	setTimeout(() => { 
		void element.offsetWidth; // this line triggers a DOM reflow
		element.classList.remove("blackSquare"); 
	}, 3000);

}

function transition(current_id) {
	
let diceRoll = Math.floor(Math.random()*4);
if (diceRoll == 0) {
	toBlack(current_id);
	console.log("0");
} else if (diceRoll == 1) {
	toBlack(current_id);
	console.log("1");
} else if (diceRoll == 2) {
	img_switch(current_id);
	console.log("2");
} else if (diceRoll == 3) {
	img_switch(current_id);
	console.log("3");
	}

console.log(current_id + " transition complete & diceRoll = " + diceRoll);
}

</script>
</body>
</html>


